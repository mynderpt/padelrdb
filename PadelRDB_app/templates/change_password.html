<!DOCTYPE html>
{% extends 'base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/create.css' %}">
{% endblock %}

{% block content %}

<div class="main">
    <div class="signup-container">
        <h2>Change Password</h2>
        <form id="change-password-form">
            <!-- Current Password Field -->
            <div class="input-group">
                <label for="current-password">Current Password</label>
                <input type="password" id="current-password" placeholder="Enter current password">
                <div class="error" id="current-password-error">Current password cannot be empty.</div>
            </div>

            <!-- New Password Field -->
            <div class="input-group">
                <label for="new-password">New Password</label>
                <input type="password" id="new-password" placeholder="Enter new password">
                <div class="error" id="new-password-error">New password must be at least 6 characters.</div>
            </div>

            <!-- Confirm New Password Field -->
            <div class="input-group">
                <label for="confirm-new-password">Confirm New Password</label>
                <input type="password" id="confirm-new-password" placeholder="Re-enter new password">
                <div class="error" id="confirm-new-password-error">Passwords do not match.</div>
            </div>

            <!-- Change Password Button -->
            <button type="submit" class="signup-btn">Change Password</button>
        </form>

        <!-- Back to Profile/Settings Link -->
        <div class="login-link">
            <a href="{% url 'profile' %}">Back to Profile</a>
        </div>
    </div>
</div>

<script>
    document.getElementById("change-password-form").addEventListener("submit", function (event) {
        event.preventDefault();

        let isValid = true;

        // Validate Current Password
        const currentPassword = document.getElementById("current-password");
        const currentPasswordError = document.getElementById("current-password-error");
        if (currentPassword.value.trim() === "") {
            currentPasswordError.style.display = "block";
            isValid = false;
        } else {
            currentPasswordError.style.display = "none";
        }

        // Validate New Password
        const newPassword = document.getElementById("new-password");
        const newPasswordError = document.getElementById("new-password-error");
        if (newPassword.value.length < 6) {
            newPasswordError.style.display = "block";
            isValid = false;
        } else {
            newPasswordError.style.display = "none";
        }

        // Confirm New Password
        const confirmPassword = document.getElementById("confirm-new-password");
        const confirmPasswordError = document.getElementById("confirm-new-password-error");
        if (confirmPassword.value !== newPassword.value) {
            confirmPasswordError.style.display = "block";
            isValid = false;
        } else {
            confirmPasswordError.style.display = "none";
        }

        if (isValid) {
            alert("Password changed successfully! (This is a demo)");
            // Add logic to handle actual password change via backend
        }
    });
</script>

{% endblock %}
